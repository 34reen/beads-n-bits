{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dell/beads-n-bits/frontend/src/app/cart/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { FaShoppingCart } from \"react-icons/fa\";\r\n\r\ntype CartItem = {\r\n  id: string;\r\n  name: string;\r\n  price: number;\r\n  image: string;\r\n  quantity: number;\r\n};\r\n\r\nexport default function CartPage() {\r\n  const [cartItems, setCartItems] = useState<CartItem[]>([]);\r\n  const backendUrl = process.env.NEXT_PUBLIC_BACKEND_URL || \"http://localhost/backend\";\r\n\r\n  // Function to clean and construct proper image URL\r\n  const getImageUrl = (imagePath: string) => {\r\n  // If it's missing the admin/uploads path, add it\r\n  if (imagePath.includes('http://localhost/backend/') && \r\n      !imagePath.includes('/admin/uploads/')) {\r\n    const filename = imagePath.replace('http://localhost/backend/', '');\r\n    return `${backendUrl}/admin/uploads/${filename}`;\r\n  }\r\n  // If it's just a filename (no http), construct full URL\r\n  if (!imagePath.includes('http')) {\r\n    return `${backendUrl}/admin/uploads/${imagePath}`;\r\n  }\r\n  // If it's already a proper URL, use it as is\r\n  return imagePath;\r\n};\r\n\r\n  const loadCart = () => {\r\n    const storedCart = JSON.parse(localStorage.getItem(\"cart\") || \"[]\");\r\n    setCartItems(storedCart);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadCart();\r\n\r\n    // ðŸ”„ Listen for cart changes in localStorage\r\n    const handleStorageChange = (event: StorageEvent) => {\r\n      if (event.key === \"cart\") {\r\n        loadCart();\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"storage\", handleStorageChange);\r\n    return () => window.removeEventListener(\"storage\", handleStorageChange);\r\n  }, []);\r\n\r\n  const updateQuantity = (id: string, quantity: number) => {\r\n    const updatedCart = cartItems.map((item) =>\r\n      item.id === id ? { ...item, quantity } : item\r\n    );\r\n    setCartItems(updatedCart);\r\n    localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\r\n  };\r\n\r\n  const removeItem = (id: string) => {\r\n    const updatedCart = cartItems.filter((item) => item.id !== id);\r\n    setCartItems(updatedCart);\r\n    localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\r\n  };\r\n\r\n  const total = cartItems.reduce(\r\n    (sum, item) => sum + item.price * item.quantity,\r\n    0\r\n  );\r\n\r\n  if (cartItems.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <FaShoppingCart className=\"mx-auto mb-4 text-6xl text-gray-400\" />\r\n        <h2 className=\"text-xl font-semibold text-gray-600\">Your cart is empty.</h2>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Shopping Cart</h1>\r\n\r\n      <div className=\"space-y-6\">\r\n        {cartItems.map((item) => (\r\n          <div\r\n            key={item.id}\r\n            className=\"flex items-center justify-between border-b pb-4\"\r\n          >\r\n            <div className=\"flex gap-4 items-center\">\r\n              <Image\r\n                src={getImageUrl(item.image)}\r\n                alt={item.name}\r\n                width={80}\r\n                height={80}\r\n                className=\"object-cover rounded\"\r\n              />\r\n              <div>\r\n                <p className=\"font-semibold\">{item.name}</p>\r\n                <p className=\"text-sm text-gray-500\">KES {item.price.toLocaleString('en-KE', { maximumFractionDigits: 0 })}</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <input\r\n                type=\"number\"\r\n                value={item.quantity}\r\n                min={1}\r\n                className=\"w-16 border px-2 py-1 rounded\"\r\n                onChange={(e) =>\r\n                  updateQuantity(item.id, parseInt(e.target.value) || 1)\r\n                }\r\n              />\r\n              <button\r\n                className=\"text-red-500 text-sm\"\r\n                onClick={() => removeItem(item.id)}\r\n              >\r\n                Remove\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n\r\n        <div className=\"text-right mt-6\">\r\n          <p className=\"text-lg font-semibold\">\r\n            Total: <span className=\"text-purple-700\">KES {total.toLocaleString()}</span>\r\n          </p>\r\n          <button className=\"mt-4 px-6 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 transition\">\r\n            Proceed to Checkout\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}