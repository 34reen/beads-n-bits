{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dell/beads-n-bits/frontend/src/app/login/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\nexport default function LoginPage() {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false); // optional loading spinner\r\n\r\n  const handleLogin = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setLoading(true); // show loading while waiting for response\r\n\r\n    try {\r\n      const res = await fetch(\"http://localhost/backend/store-api/auth/login.php\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ username, password }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (data.success) {\r\n        alert(\"Login successful!\");\r\n        localStorage.setItem(\"user\", JSON.stringify(data.user));\r\n\r\n        // Redirect based on user role\r\n        if (data.user.role === \"admin\") {\r\n          window.location.href = \"/admin\";\r\n        } else {\r\n          window.location.href = \"/\";\r\n        }\r\n      } else {\r\n        setError(data.error || \"Login failed.\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Login error:\", err);\r\n      setError(\"Something went wrong. Please try again.\");\r\n    } finally {\r\n      setLoading(false); // stop loading spinner\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\r\n      <form onSubmit={handleLogin} className=\"bg-white p-6 rounded shadow-md w-full max-w-sm\">\r\n        <h2 className=\"text-2xl font-bold mb-4\">Login</h2>\r\n\r\n        {error && <p className=\"text-red-500 mb-4\">{error}</p>}\r\n\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Username\"\r\n          value={username}\r\n          onChange={(e) => setUsername(e.target.value)}\r\n          className=\"w-full mb-4 px-3 py-2 border rounded\"\r\n          required\r\n        />\r\n\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          className=\"w-full mb-4 px-3 py-2 border rounded\"\r\n          required\r\n        />\r\n\r\n        <button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          className={`w-full text-white py-2 rounded transition ${\r\n            loading ? \"bg-gray-400 cursor-not-allowed\" : \"bg-purple-600 hover:bg-purple-700\"\r\n          }`}\r\n        >\r\n          {loading ? \"Logging in...\" : \"Login\"}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;;;AAFA;;AAIe,SAAS;;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,QAAQ,2BAA2B;IAE1E,MAAM,cAAc,OAAO;QACzB,EAAE,cAAc;QAChB,SAAS;QACT,WAAW,OAAO,0CAA0C;QAE5D,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,qDAAqD;gBAC3E,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAU;gBAAS;YAC5C;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,KAAK,OAAO,EAAE;gBAChB,MAAM;gBACN,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,KAAK,IAAI;gBAErD,8BAA8B;gBAC9B,IAAI,KAAK,IAAI,CAAC,IAAI,KAAK,SAAS;oBAC9B,OAAO,QAAQ,CAAC,IAAI,GAAG;gBACzB,OAAO;oBACL,OAAO,QAAQ,CAAC,IAAI,GAAG;gBACzB;YACF,OAAO;gBACL,SAAS,KAAK,KAAK,IAAI;YACzB;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,SAAS;QACX,SAAU;YACR,WAAW,QAAQ,uBAAuB;QAC5C;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAK,UAAU;YAAa,WAAU;;8BACrC,6LAAC;oBAAG,WAAU;8BAA0B;;;;;;gBAEvC,uBAAS,6LAAC;oBAAE,WAAU;8BAAqB;;;;;;8BAE5C,6LAAC;oBACC,MAAK;oBACL,aAAY;oBACZ,OAAO;oBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oBAC3C,WAAU;oBACV,QAAQ;;;;;;8BAGV,6LAAC;oBACC,MAAK;oBACL,aAAY;oBACZ,OAAO;oBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oBAC3C,WAAU;oBACV,QAAQ;;;;;;8BAGV,6LAAC;oBACC,MAAK;oBACL,UAAU;oBACV,WAAW,CAAC,0CAA0C,EACpD,UAAU,mCAAmC,qCAC7C;8BAED,UAAU,kBAAkB;;;;;;;;;;;;;;;;;AAKvC;GA9EwB;KAAA","debugId":null}}]
}