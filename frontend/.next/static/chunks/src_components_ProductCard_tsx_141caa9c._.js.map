{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/dell/beads-n-bits/frontend/src/components/ProductCard.tsx"],"sourcesContent":["\"use client\";\r\nimport Image from \"next/image\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\ntype Product = {\r\n  id: string;\r\n  name: string;\r\n  price: number;\r\n  image: string;\r\n  rating: number;\r\n};\r\n\r\nexport default function ProductCard({ product }: { product: Product }) {\r\n  const [isWishlisted, setIsWishlisted] = useState(false);\r\n\r\n  // ‚úÖ Load wishlist state from localStorage\r\n  useEffect(() => {\r\n    const wishlist = JSON.parse(localStorage.getItem(\"wishlist\") || \"[]\");\r\n    setIsWishlisted(wishlist.includes(product.id));\r\n  }, [product.id]);\r\n\r\n  // ‚úÖ Wishlist toggle + sync with backend\r\n  const toggleWishlist = async () => {\r\n    const wishlist = JSON.parse(localStorage.getItem(\"wishlist\") || \"[]\");\r\n\r\n    let updatedWishlist;\r\n    if (isWishlisted) {\r\n      updatedWishlist = wishlist.filter((id: string) => id !== product.id);\r\n    } else {\r\n      updatedWishlist = [...wishlist, product.id];\r\n      try {\r\n        await fetch(\"http://localhost/backend/store-api/wishlist/add-to-wishlist.php\", {\r\n  method: \"POST\",\r\n  headers: { \"Content-Type\": \"application/json\" },\r\n  body: JSON.stringify({\r\n    userId: 1,\r\n    productId: parseInt(product.id),\r\n  }),\r\n});\r\n\r\n      } catch (error) {\r\n        console.error(\"Failed to sync with backend:\", error);\r\n      }\r\n    }\r\n\r\n    localStorage.setItem(\"wishlist\", JSON.stringify(updatedWishlist));\r\n    setIsWishlisted(!isWishlisted);\r\n  };\r\n  type CartItem = Product & {\r\n  quantity: number;\r\n};\r\n\r\n  // ‚úÖ Add to cart logic\r\n  const handleAddToCart = async() => {\r\n    await fetch(\"http://localhost/backend/store-api/cart/add-to-cart.php\", {\r\n  method: \"POST\",\r\n  headers: { \"Content-Type\": \"application/json\" },\r\n  body: JSON.stringify({\r\n    userId: 1,\r\n    productId: parseInt(product.id),\r\n    quantity: 1,\r\n  }),\r\n});\r\n\r\n\r\n  const existingCart: CartItem[] = JSON.parse(localStorage.getItem(\"cart\") || \"[]\");\r\n\r\n  const itemIndex = existingCart.findIndex((item) => item.id === product.id);\r\n  let updatedCart;\r\n\r\n  if (itemIndex > -1) {\r\n    existingCart[itemIndex].quantity += 1;\r\n    updatedCart = existingCart;\r\n  } else {\r\n    updatedCart = [...existingCart, { ...product, quantity: 1 }];\r\n  }\r\n\r\n  localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\r\n  alert(`${product.name} added to cart!`);\r\n};\r\n\r\n  return (\r\n    <div className=\"bg-white shadow-md rounded-lg overflow-hidden hover:shadow-xl transition-shadow duration-300 relative\">\r\n      <Image\r\n        src={product.image}\r\n        alt={product.name}\r\n        width={400}\r\n        height={300}\r\n        className=\"w-full object-cover h-60\"\r\n      />\r\n\r\n      {/* Wishlist Button */}\r\n      <button\r\n        onClick={toggleWishlist}\r\n        className=\"absolute top-3 right-3 bg-white p-2 rounded-full shadow hover:scale-105 transition\"\r\n        aria-label=\"Add to wishlist\"\r\n      >\r\n        <span className={isWishlisted ? \"text-red-500\" : \"text-gray-400\"}>\r\n          {isWishlisted ? \"‚ù§Ô∏è\" : \"ü§ç\"}\r\n        </span>\r\n      </button>\r\n\r\n      <div className=\"p-4\">\r\n        <h2 className=\"text-lg font-semibold text-gray-800\">{product.name}</h2>\r\n        <p className=\"text-purple-700 font-bold mt-2\">\r\n          Ksh {product.price.toLocaleString()}\r\n        </p>\r\n        <p className=\"text-sm text-gray-500 mt-1\">\r\n          ‚≠ê {product.rating.toFixed(1)} / 5\r\n        </p>\r\n\r\n        {/* ‚úÖ Add to Cart Button */}\r\n        <button\r\n          onClick={handleAddToCart}\r\n          className=\"mt-4 w-full bg-purple-600 text-white py-2 rounded hover:bg-purple-700 transition\"\r\n        >\r\n          Add to Cart\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;;;AAFA;;;AAYe,SAAS,YAAY,EAAE,OAAO,EAAwB;;IACnE,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEjD,0CAA0C;IAC1C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,MAAM,WAAW,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,eAAe;YAChE,gBAAgB,SAAS,QAAQ,CAAC,QAAQ,EAAE;QAC9C;gCAAG;QAAC,QAAQ,EAAE;KAAC;IAEf,wCAAwC;IACxC,MAAM,iBAAiB;QACrB,MAAM,WAAW,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,eAAe;QAEhE,IAAI;QACJ,IAAI,cAAc;YAChB,kBAAkB,SAAS,MAAM,CAAC,CAAC,KAAe,OAAO,QAAQ,EAAE;QACrE,OAAO;YACL,kBAAkB;mBAAI;gBAAU,QAAQ,EAAE;aAAC;YAC3C,IAAI;gBACF,MAAM,MAAM,mEAAmE;oBACrF,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;oBAAmB;oBAC9C,MAAM,KAAK,SAAS,CAAC;wBACnB,QAAQ;wBACR,WAAW,SAAS,QAAQ,EAAE;oBAChC;gBACF;YAEM,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,gCAAgC;YAChD;QACF;QAEA,aAAa,OAAO,CAAC,YAAY,KAAK,SAAS,CAAC;QAChD,gBAAgB,CAAC;IACnB;IAKA,sBAAsB;IACtB,MAAM,kBAAkB;QACtB,MAAM,MAAM,2DAA2D;YACzE,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBACnB,QAAQ;gBACR,WAAW,SAAS,QAAQ,EAAE;gBAC9B,UAAU;YACZ;QACF;QAGE,MAAM,eAA2B,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,WAAW;QAE5E,MAAM,YAAY,aAAa,SAAS,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK,QAAQ,EAAE;QACzE,IAAI;QAEJ,IAAI,YAAY,CAAC,GAAG;YAClB,YAAY,CAAC,UAAU,CAAC,QAAQ,IAAI;YACpC,cAAc;QAChB,OAAO;YACL,cAAc;mBAAI;gBAAc;oBAAE,GAAG,OAAO;oBAAE,UAAU;gBAAE;aAAE;QAC9D;QAEA,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;QAC5C,MAAM,GAAG,QAAQ,IAAI,CAAC,eAAe,CAAC;IACxC;IAEE,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,gIAAA,CAAA,UAAK;gBACJ,KAAK,QAAQ,KAAK;gBAClB,KAAK,QAAQ,IAAI;gBACjB,OAAO;gBACP,QAAQ;gBACR,WAAU;;;;;;0BAIZ,6LAAC;gBACC,SAAS;gBACT,WAAU;gBACV,cAAW;0BAEX,cAAA,6LAAC;oBAAK,WAAW,eAAe,iBAAiB;8BAC9C,eAAe,OAAO;;;;;;;;;;;0BAI3B,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAuC,QAAQ,IAAI;;;;;;kCACjE,6LAAC;wBAAE,WAAU;;4BAAiC;4BACvC,QAAQ,KAAK,CAAC,cAAc;;;;;;;kCAEnC,6LAAC;wBAAE,WAAU;;4BAA6B;4BACrC,QAAQ,MAAM,CAAC,OAAO,CAAC;4BAAG;;;;;;;kCAI/B,6LAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT;GA7GwB;KAAA","debugId":null}}]
}